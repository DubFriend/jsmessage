if(jsMessage===undefined){var jsMessage=function(){"use strict";var e={};var t=Array.prototype,n=Object.prototype,r=Function.prototype;var i=t.push,s=t.slice,o=t.concat,u=n.toString,a=n.hasOwnProperty;var f=t.forEach,l=t.filter;var c={};c.each=function(t,n,r){if(t==null){return}if(f&&t.forEach===f){t.forEach(n,r)}else if(t.length===+t.length){for(var i=0,s=t.length;i<s;i++){if(n.call(r,t[i],i,t)===e){return}}}else{for(var o in t){if(c.has(t,o)){if(n.call(r,t[o],o,t)===e){return}}}}};c.filter=function(e,t,n){var r=[];if(e==null){return r}if(l&&e.filter===l){return e.filter(t,n)}c.each(e,function(e,i,s){if(t.call(n,e,i,s)){r.push(e)}});return r};c.isFunction=function(e){return typeof e==="function"};c.has=function(e,t){return a.call(e,t)};var h={};h.mixinPubSub=function(e){e=e||{};var t={},n=[];e.subscribe=function(e,r){if(r){t[r]=t[r]||[];t[r].push(e)}else{n.push(e)}};e.unsubscribe=function(e,r){var i=function(n){return c.filter(t[n],function(t){return t!==e})};if(r){if(t[r]){t[r]=i(r)}else{throw"topic not found"}}else{c.each(t,function(e,n){t[n]=i(n)});n=c.filter(n,function(t){return t!==e})}};e.publish=function(e,r){if(r){c.each(t[r],function(t){t(e)})}else{c.each(t,function(t,n){c.each(t,function(t){t(e)})})}c.each(n,function(t){t(e)})};return e};h.mixinEvents=function(e,t){var n={},r=t||{};c.each(e,function(t,i){if(c.isFunction(t)){e[i]=function(){var s,o=t.apply(e,arguments);if(n[i]){if(r[i]){s=r[i].apply(e,[o])}c.each(n[i],function(e){e(s)})}return o}}});e.on=function(e,t){n[e]=n[e]||[];n[e].push(t)};e.off=function(e,t){if(t){n[e]=c.filter(n[e],function(e){return e!==t})}else{n[e]=undefined}};return e};return h}()}else{throw"jsMessage is allready defined"}